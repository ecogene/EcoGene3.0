<?
function _set_latin1($data)

    {

    $latin2 = array(0=>'192', 1=>'193', 2=>'194', 3=>'195', 4=>'196', 5=>'197',
    				6=>'198', 7=>'199', 8=>'200', 9=>'201', 10=>'202', 11=>'203',
    				11=>'204', 12=>'205', 13=>'206', 14=>'207', 15=>'208', 16=>'209',
    				17=>'210', 18=>'211', 19=>'212', 20=>'213', 21=>'214', 22=>'215',
    				23=>'216', 24=>'217', 25=>'218', 26=>'219', 27=>'220', 28=>'221',
    				29=>'222', 30=>'223', 31=>'224', 32=>'225', 33=>'226', 34=>'227',
    				35=>'228', 36=>'229', 37=>'230', 38=>'231', 39=>'232', 40=>'233',
    				41=>'234', 42=>'235', 43=>'236', 44=>'237', 45=>'238', 46=>'239',
    				47=>'240', 48=>'241', 49=>'242', 50=>'243', 51=>'244', 52=>'245',
    				53=>'246', 54=>'247', 55=>'248', 56=>'249', 57=>'250', 58=>'251',
    				59=>'252', 60=>'253', 61=>'254', 62=>'255', 63=>'256', 64=>'257',
    				65=>'258', 66=>'259', 67=>'260', 68=>'261', 69=>'262', 70=>'253',
    				71=>'264', 72=>'265', 73=>'266', 74=>'267', 75=>'268', 76=>'269',
    				77=>'270', 78=>'271', 79=>'272', 80=>'273', 81=>'274', 82=>'275',
    				83=>'276', 84=>'277', 85=>'278', 86=>'279', 87=>'280', 88=>'281',
    				89=>'282', 90=>'283', 91=>'284', 92=>'285', 93=>'286', 94=>'287',
    				95=>'288', 96=>'289', 97=>'290', 98=>'291', 99=>'292', 100=>'293',
    				101=>'294', 102=>'295', 103=>'296', 104=>'297', 105=>'298', 106=> '299',
    				107=>'300', 108=>'301', 109=>'302', 110=>'303', 111=>'304', 112=> '305',
    				113=>'306', 114=>'307', 115=>'308', 116=>'309', 117=>'310', 118=> '311',
    				119=>'312', 120=>'313', 121=>'314', 122=>'315', 123=>'316', 124=> '317',
     				125=>'318', 126=>'319', 127=>'320', 128=>'321', 129=>'322', 130=> '323',
    				131=>'324', 132=>'325', 133=>'326', 134=>'327', 135=>'328', 136=> '329',
    				137=>'330', 138=>'331', 139=>'332', 140=>'333', 141=>'334', 142=> '335',
    				143=>'336', 144=>'337', 145=>'338', 146=>'339', 147=>'340', 148=> '341',
    				149=>'342', 150=>'343', 151=>'344', 152=>'345', 153=>'346', 154=> '347',
    				155=>'348', 156=>'349', 157=>'350', 158=>'351', 159=>'352', 160=> '353',
    				161=>'354', 162=>'355', 163=>'356', 164=>'357', 165=>'358', 166=> '359',
    				167=>'360', 168=>'361', 169=>'362', 170=>'363', 171=>'364', 172=> '365',
    				173=>'366', 174=>'367', 175=>'368', 176=>'369', 177=>'370', 178=> '371',
    				179=>'372', 180=>'373', 181=>'374', 182=>'375', 183=>'376', 184=> '377',
    				185=>'378', 186=>'379', 187=>'380', 188=>'381', 189=>'382', 190=> '323'			
    				);



    $latin1 = array(0=>'65', 1=>'65', 2=>'65', 3=>'65', 4=>'65', 5=>'65',
    				6=>'69', 7=>'67', 8=>'69', 9=>'69', 10=>'69', 11=>'69',
    				11=>'73', 12=>'73', 13=>'73', 14=>'73', 15=>'68', 16=>'78',
    				17=>'79', 18=>'79', 19=>'79', 20=>'79', 21=>'79', 22=>'215',
    				23=>'79', 24=>'85', 25=>'85', 26=>'85', 27=>'85', 28=>'89',
    				29=>'222', 30=>'66', 31=>'97', 32=>'97', 33=>'97', 34=>'97',
    				35=>'97', 36=>'97', 37=>'97', 38=>'99', 39=>'101', 40=>'101',
    				41=>'101', 42=>'101', 43=>'105', 44=>'105', 45=>'105', 46=>'105',
    				47=>'111', 48=>'110', 49=>'111', 50=>'111', 51=>'111', 52=>'111',
    				53=>'111', 54=>'247', 55=>'111', 56=>'117', 57=>'117', 58=>'117',
    				59=>'117', 60=>'121', 61=>'112', 62=>'121', 63=>'65', 64=>'97',
    				65=>'65', 66=>'97', 67=>'65', 68=>'97', 69=>'67', 70=>'99',
    				71=>'67', 72=>'99', 73=>'67', 74=>'99', 75=>'67', 76=>'99',
    				77=>'68', 78=>'100', 79=>'68', 80=>'100', 81=>'69', 82=>'101',
    				83=>'69', 84=>'101', 85=>'69', 86=>'101', 87=>'69', 88=>'101',
    				89=>'69', 90=>'101', 91=>'71', 92=>'103', 93=>'71', 94=>'103',
    				95=>'71', 96=>'103', 97=>'71', 98=>'103', 99=>'72', 100=>'104',
    				101=>'72', 102=>'104', 103=>'73', 104=>'105', 105=>'73', 106=> '105',
    				107=>'73', 108=>'105', 109=>'73', 110=>'105', 111=>'73', 112=> '105',
    				113=>'306', 114=>'307', 115=>'74', 116=>'106', 117=>'75', 118=> '107',
    				119=>'107', 120=>'76', 121=>'108', 122=>'76', 123=>'108', 124=> '76',
     				125=>'108', 126=>'76', 127=>'108', 128=>'76', 129=>'108', 130=> '78',
    				131=>'110', 132=>'78', 133=>'110', 134=>'78', 135=>'110', 136=> '110',
    				137=>'330', 138=>'331', 139=>'79', 140=>'111', 141=>'79', 142=> '111',
    				143=>'79', 144=>'111', 145=>'338', 146=>'339', 147=>'82', 148=> '114',
    				149=>'82', 150=>'114', 151=>'82', 152=>'114', 153=>'83', 154=> '115',
    				155=>'83', 156=>'115', 157=>'83', 158=>'115', 159=>'83', 160=> '115',
    				161=>'84', 162=>'116', 163=>'84', 164=>'116', 165=>'84', 166=> '116',
    				167=>'85', 168=>'117', 169=>'85', 170=>'117', 171=>'85', 172=> '117',
    				173=>'85', 174=>'117', 175=>'85', 176=>'117', 177=>'85', 178=> '117',
    				179=>'87', 180=>'118', 181=>'89', 182=>'119', 183=>'89', 184=> '90',
    				185=>'120', 186=>'90', 187=>'120', 188=>'90', 189=>'120', 190=> '115' 
    				);
     
			
	return str_replace($latin2, $latin1, ($data));
    }
			
function utf8_to_unicode( $str ) {
        
        $unicode = array();        
        $values = array();
        $lookingFor = 1;
        
        for ($i = 0; $i < strlen( $str ); $i++ ) {

            $thisValue = ord( $str[ $i ] );
            
            if ( $thisValue < 128 ) $unicode[] = $thisValue;
            else {
            
                if ( count( $values ) == 0 ) $lookingFor = ( $thisValue < 224 ) ? 2 : 3;
                
                $values[] = $thisValue;
                
                if ( count( $values ) == $lookingFor ) {
            
                    $number = ( $lookingFor == 3 ) ?
                        ( ( $values[0] % 16 ) * 4096 ) + ( ( $values[1] % 64 ) * 64 ) + ( $values[2] % 64 ):
                    	( ( $values[0] % 32 ) * 64 ) + ( $values[1] % 64 );
                        
                    $unicode[] = $number;
                    $values = array();
                    $lookingFor = 1;
            
                } // if
            
            } // if
            
        } // for

        return $unicode;
    
 } 
 
 function remove_unicode_accent( $unicode ) {
    
        $noaccent = array();
        $i = 0;
        foreach( $unicode as $value ) {
        
            $noaccent[$i]= _set_latin1($value);
            $i++;
            
        } //foreach
        return $noaccent;
        
 }
 
 function unicode_to_utf8( $str ) {
    
        $utf8 = '';
        
        foreach( $str as $unicode ) {
        	
        	//echo $unicode."   ";
        
            if ( $unicode < 128 ) {

                $utf8.= chr( $unicode );
            
            } elseif ( $unicode < 2048 ) {
                
                $utf8.= chr( 192 +  ( ( $unicode - ( $unicode % 64 ) ) / 64 ) );
                $utf8.= chr( 128 + ( $unicode % 64 ) );
                        
            } else {
                
                $utf8.= chr( 224 + ( ( $unicode - ( $unicode % 4096 ) ) / 4096 ) );
                $utf8.= chr( 128 + ( ( ( $unicode % 4096 ) - ( $unicode % 64 ) ) / 64 ) );
                $utf8.= chr( 128 + ( $unicode % 64 ) );
                
            } // if
            
        } // foreach
    
        return $utf8;
    
 }
 
 function remove_accent ($str) {
 	$unicodeauthor = array();
	$unicodeauthor = utf8_to_unicode($str);
	$unicodeauthor = remove_unicode_accent($unicodeauthor);
	$authornoaccent = unicode_to_utf8($unicodeauthor);
	return $authornoaccent;
 	
 }
 ?>